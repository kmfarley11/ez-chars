var J=Object.defineProperty;var Y=t=>{throw TypeError(t)};var V=(t,e,s)=>e in t?J(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>V(t,typeof e!="symbol"?e+"":e,s),x=(t,e,s)=>e.has(t)||Y("Cannot "+s);var r=(t,e,s)=>(x(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?Y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),C=(t,e,s,a)=>(x(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{G as F,U as K,Z as M,V as Q,n as H,J as $,q as N,C as z,a2 as W,L as X,o as ee,y as te,a1 as se,z as ae,a3 as re,H as ie,A as ne,v as fe,B as k,a4 as ue,a5 as ce,a6 as q,R as oe,a7 as le,a8 as de,g as P,a9 as G,a as he,aa as _e,ab as ve,ac as be,ad as ge,ae as Se,af as me,ag as pe,ah as Ae,ai as Te,l as Re,aj as Ee,ak as Ie,h as Pe,M as Oe,al as De,am as Me}from"./CcLaOwj3.js";var h,v,l,g,A,T,O;class Ne{constructor(e,s=!0){y(this,"anchor");b(this,h,new Map);b(this,v,new Map);b(this,l,new Map);b(this,g,new Set);b(this,A,!0);b(this,T,()=>{var e=F;if(r(this,h).has(e)){var s=r(this,h).get(e),a=r(this,v).get(s);if(a)K(a),r(this,g).delete(s);else{var i=r(this,l).get(s);i&&(r(this,v).set(s,i.effect),r(this,l).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[n,u]of r(this,h)){if(r(this,h).delete(n),n===e)break;const f=r(this,l).get(u);f&&(M(f.effect),r(this,l).delete(u))}for(const[n,u]of r(this,v)){if(n===s||r(this,g).has(n))continue;const f=()=>{if(Array.from(r(this,h).values()).includes(n)){var d=document.createDocumentFragment();W(u,d),d.append(H()),r(this,l).set(n,{effect:u,fragment:d})}else M(u);r(this,g).delete(n),r(this,v).delete(n)};r(this,A)||!a?(r(this,g).add(n),Q(u,f,!1)):f()}}});b(this,O,e=>{r(this,h).delete(e);const s=Array.from(r(this,h).values());for(const[a,i]of r(this,l))s.includes(a)||(M(i.effect),r(this,l).delete(a))});this.anchor=e,C(this,A,s)}ensure(e,s){var a=F,i=X();if(s&&!r(this,v).has(e)&&!r(this,l).has(e))if(i){var n=document.createDocumentFragment(),u=H();n.append(u),r(this,l).set(e,{effect:$(()=>s(u)),fragment:n})}else r(this,v).set(e,$(()=>s(this.anchor)));if(r(this,h).set(a,e),i){for(const[f,c]of r(this,v))f===e?a.unskip_effect(c):a.skip_effect(c);for(const[f,c]of r(this,l))f===e?a.unskip_effect(c.effect):a.skip_effect(c.effect);a.oncommit(r(this,T)),a.ondiscard(r(this,O))}else N&&(this.anchor=z),r(this,T).call(this)}}h=new WeakMap,v=new WeakMap,l=new WeakMap,g=new WeakMap,A=new WeakMap,T=new WeakMap,O=new WeakMap;function Ue(t,e,s=!1){var a;N&&(a=z,te());var i=new Ne(t),n=s?se:0;function u(f,c){if(N){var d=ae(a),_;if(d===re?_=0:d===ie?_=!1:_=parseInt(d.substring(1)),f!==_){var R=ne();fe(R),i.anchor=R,k(!1),i.ensure(f,c),k(!0);return}}i.ensure(f,c)}ee(()=>{var f=!1;e((c,d=0)=>{f=!0,u(d,c)}),f||u(!1,null)},n)}let I=!1,L=Symbol();function Ye(t,e,s){const a=s[e]??(s[e]={store:null,source:oe(void 0),unsubscribe:q});if(a.store!==t&&!(L in s))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=q;else{var i=!0;a.unsubscribe=le(t,n=>{i?a.source.v=n:G(a.source,n)}),i=!1}return t&&L in s?de(t):P(a.source)}function ye(){const t={};function e(){ue(()=>{for(var s in t)t[s].unsubscribe();ce(t,L,{enumerable:!1,value:!0})})}return[t,e]}function Le(t){var e=I;try{return I=!1,[t(),I]}finally{I=e}}function xe(t,e,s,a){var B;var i=!Re||(s&Ee)!==0,n=(s&Te)!==0,u=(s&Ae)!==0,f=a,c=!0,d=()=>(c&&(c=!1,f=u?he(a):a),f),_;if(n){var R=De in t||Me in t;_=((B=_e(t,e))==null?void 0:B.set)??(R&&e in t?o=>t[e]=o:void 0)}var m,w=!1;n?[m,w]=Le(()=>t[e]):m=t[e],m===void 0&&a!==void 0&&(m=d(),_&&(i&&ve(),_(m)));var S;if(i?S=()=>{var o=t[e];return o===void 0?d():(c=!0,o)}:S=()=>{var o=t[e];return o!==void 0&&(f=void 0),o===void 0?f:o},i&&(s&be)===0)return S;if(_){var Z=t.$$legacy;return(function(o,E){return arguments.length>0?((!i||!E||Z||w)&&_(E?S():o),o):S()})}var D=!1,p=((s&Ie)!==0?Pe:Oe)(()=>(D=!1,S()));n&&P(p);var j=me;return(function(o,E){if(arguments.length>0){const U=E?P(p):i&&n?ge(o):o;return G(p,U),D=!0,f!==void 0&&(f=U),o}return Se&&D||(j.f&pe)!==0?p.v:P(p)})}export{Ne as B,Ye as a,Ue as i,xe as p,ye as s};
