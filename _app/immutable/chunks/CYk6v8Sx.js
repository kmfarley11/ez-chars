var K=Object.defineProperty;var x=t=>{throw TypeError(t)};var V=(t,e,s)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var y=(t,e,s)=>V(t,typeof e!="symbol"?e+"":e,s),F=(t,e,s)=>e.has(t)||x("Cannot "+s);var r=(t,e,s)=>(F(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),U=(t,e,s,a)=>(F(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{K as C,Y as J,a1 as M,Z as Q,v as H,M as $,y as N,F as Z,a6 as W,O as X,x as ee,B as te,a5 as se,C as ae,a7 as re,H as ie,D as ne,z as fe,E as k,a8 as ue,a9 as ce,aa as z,V as oe,ab as le,ac as de,g as R,ad as j,u as he,ae as _e,af as ve,ag as be,ah as ge,ai as Se,aj as me,ak as pe,al as Te,am as Ae,l as Ee,an as Pe,ao as Ie,i as Re,P as Oe,S as De,ap as Me}from"./KHMzLeng.js";var h,v,l,g,T,A,O;class Ne{constructor(e,s=!0){y(this,"anchor");b(this,h,new Map);b(this,v,new Map);b(this,l,new Map);b(this,g,new Set);b(this,T,!0);b(this,A,()=>{var e=C;if(r(this,h).has(e)){var s=r(this,h).get(e),a=r(this,v).get(s);if(a)J(a),r(this,g).delete(s);else{var i=r(this,l).get(s);i&&(r(this,v).set(s,i.effect),r(this,l).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[n,u]of r(this,h)){if(r(this,h).delete(n),n===e)break;const f=r(this,l).get(u);f&&(M(f.effect),r(this,l).delete(u))}for(const[n,u]of r(this,v)){if(n===s||r(this,g).has(n))continue;const f=()=>{if(Array.from(r(this,h).values()).includes(n)){var d=document.createDocumentFragment();W(u,d),d.append(H()),r(this,l).set(n,{effect:u,fragment:d})}else M(u);r(this,g).delete(n),r(this,v).delete(n)};r(this,T)||!a?(r(this,g).add(n),Q(u,f,!1)):f()}}});b(this,O,e=>{r(this,h).delete(e);const s=Array.from(r(this,h).values());for(const[a,i]of r(this,l))s.includes(a)||(M(i.effect),r(this,l).delete(a))});this.anchor=e,U(this,T,s)}ensure(e,s){var a=C,i=X();if(s&&!r(this,v).has(e)&&!r(this,l).has(e))if(i){var n=document.createDocumentFragment(),u=H();n.append(u),r(this,l).set(e,{effect:$(()=>s(u)),fragment:n})}else r(this,v).set(e,$(()=>s(this.anchor)));if(r(this,h).set(a,e),i){for(const[f,c]of r(this,v))f===e?a.unskip_effect(c):a.skip_effect(c);for(const[f,c]of r(this,l))f===e?a.unskip_effect(c.effect):a.skip_effect(c.effect);a.oncommit(r(this,A)),a.ondiscard(r(this,O))}else N&&(this.anchor=Z),r(this,A).call(this)}}h=new WeakMap,v=new WeakMap,l=new WeakMap,g=new WeakMap,T=new WeakMap,A=new WeakMap,O=new WeakMap;function Ye(t,e,s=!1){var a;N&&(a=Z,te());var i=new Ne(t),n=s?se:0;function u(f,c){if(N){var d=ae(a),_;if(d===re?_=0:d===ie?_=!1:_=parseInt(d.substring(1)),f!==_){var E=ne();fe(E),i.anchor=E,k(!1),i.ensure(f,c),k(!0);return}}i.ensure(f,c)}ee(()=>{var f=!1;e((c,d=0)=>{f=!0,u(d,c)}),f||u(!1,null)},n)}let I=!1,w=Symbol();function xe(t,e,s){const a=s[e]??(s[e]={store:null,source:oe(void 0),unsubscribe:z});if(a.store!==t&&!(w in s))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=z;else{var i=!0;a.unsubscribe=le(t,n=>{i?a.source.v=n:j(a.source,n)}),i=!1}return t&&w in s?de(t):R(a.source)}function ye(){const t={};function e(){ue(()=>{for(var s in t)t[s].unsubscribe();ce(t,w,{enumerable:!1,value:!0})})}return[t,e]}function we(t){var e=I;try{return I=!1,[t(),I]}finally{I=e}}function Fe(t,e,s,a){var L;var i=!Ee||(s&Pe)!==0,n=(s&Ae)!==0,u=(s&Te)!==0,f=a,c=!0,d=()=>(c&&(c=!1,f=u?he(a):a),f),_;if(n){var E=De in t||Me in t;_=((L=_e(t,e))==null?void 0:L.set)??(E&&e in t?o=>t[e]=o:void 0)}var m,B=!1;n?[m,B]=we(()=>t[e]):m=t[e],m===void 0&&a!==void 0&&(m=d(),_&&(i&&ve(),_(m)));var S;if(i?S=()=>{var o=t[e];return o===void 0?d():(c=!0,o)}:S=()=>{var o=t[e];return o!==void 0&&(f=void 0),o===void 0?f:o},i&&(s&be)===0)return S;if(_){var q=t.$$legacy;return(function(o,P){return arguments.length>0?((!i||!P||q||B)&&_(P?S():o),o):S()})}var D=!1,p=((s&Ie)!==0?Re:Oe)(()=>(D=!1,S()));n&&R(p);var G=me;return(function(o,P){if(arguments.length>0){const Y=P?R(p):i&&n?ge(o):o;return j(p,Y),D=!0,f!==void 0&&(f=Y),o}return Se&&D||(G.f&pe)!==0?p.v:R(p)})}export{Ne as B,xe as a,Ye as i,Fe as p,ye as s};
