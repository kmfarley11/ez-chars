var K=Object.defineProperty;var U=t=>{throw TypeError(t)};var Q=(t,e,s)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var x=(t,e,s)=>Q(t,typeof e!="symbol"?e+"":e,s),y=(t,e,s)=>e.has(t)||U("Cannot "+s);var r=(t,e,s)=>(y(t,e,"read from private field"),s?s.call(t):e.get(t)),b=(t,e,s)=>e.has(t)?U("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),F=(t,e,s,a)=>(y(t,e,"write to private field"),a?a.call(t,s):e.set(t,s),s);import{z as C,A as V,B as N,C as W,D as $,F as H,y as M,G as Z,H as X,I as j,x as ee,J as te,E as se,K as ae,L as re,M as ie,N as ne,O as fe,P as z,Q as ue,R as ce,T as G,U as oe,V as le,W as de,g as R,X as k,u as he,Y as _e,Z as ve,_ as be,$ as ge,a0 as Se,a1 as me,a2 as Te,a3 as pe,a4 as Ae,l as Ee,a5 as Ie,a6 as Pe,i as Re,a7 as Oe,S as De,a8 as Ne}from"./olk-RY4e.js";var h,v,l,g,p,A,O;class Me{constructor(e,s=!0){x(this,"anchor");b(this,h,new Map);b(this,v,new Map);b(this,l,new Map);b(this,g,new Set);b(this,p,!0);b(this,A,()=>{var e=C;if(r(this,h).has(e)){var s=r(this,h).get(e),a=r(this,v).get(s);if(a)V(a),r(this,g).delete(s);else{var i=r(this,l).get(s);i&&(r(this,v).set(s,i.effect),r(this,l).delete(s),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),a=i.effect)}for(const[n,u]of r(this,h)){if(r(this,h).delete(n),n===e)break;const f=r(this,l).get(u);f&&(N(f.effect),r(this,l).delete(u))}for(const[n,u]of r(this,v)){if(n===s||r(this,g).has(n))continue;const f=()=>{if(Array.from(r(this,h).values()).includes(n)){var d=document.createDocumentFragment();X(u,d),d.append($()),r(this,l).set(n,{effect:u,fragment:d})}else N(u);r(this,g).delete(n),r(this,v).delete(n)};r(this,p)||!a?(r(this,g).add(n),W(u,f,!1)):f()}}});b(this,O,e=>{r(this,h).delete(e);const s=Array.from(r(this,h).values());for(const[a,i]of r(this,l))s.includes(a)||(N(i.effect),r(this,l).delete(a))});this.anchor=e,F(this,p,s)}ensure(e,s){var a=C,i=j();if(s&&!r(this,v).has(e)&&!r(this,l).has(e))if(i){var n=document.createDocumentFragment(),u=$();n.append(u),r(this,l).set(e,{effect:H(()=>s(u)),fragment:n})}else r(this,v).set(e,H(()=>s(this.anchor)));if(r(this,h).set(a,e),i){for(const[f,c]of r(this,v))f===e?a.unskip_effect(c):a.skip_effect(c);for(const[f,c]of r(this,l))f===e?a.unskip_effect(c.effect):a.skip_effect(c.effect);a.oncommit(r(this,A)),a.ondiscard(r(this,O))}else M&&(this.anchor=Z),r(this,A).call(this)}}h=new WeakMap,v=new WeakMap,l=new WeakMap,g=new WeakMap,p=new WeakMap,A=new WeakMap,O=new WeakMap;function Ye(t,e,s=!1){var a;M&&(a=Z,te());var i=new Me(t),n=s?se:0;function u(f,c){if(M){var d=ae(a),_;if(d===re?_=0:d===ie?_=!1:_=parseInt(d.substring(1)),f!==_){var E=ne();fe(E),i.anchor=E,z(!1),i.ensure(f,c),z(!0);return}}i.ensure(f,c)}ee(()=>{var f=!1;e((c,d=0)=>{f=!0,u(d,c)}),f||u(!1,null)},n)}let P=!1,L=Symbol();function Ue(t,e,s){const a=s[e]??(s[e]={store:null,source:oe(void 0),unsubscribe:G});if(a.store!==t&&!(L in s))if(a.unsubscribe(),a.store=t??null,t==null)a.source.v=void 0,a.unsubscribe=G;else{var i=!0;a.unsubscribe=le(t,n=>{i?a.source.v=n:k(a.source,n)}),i=!1}return t&&L in s?de(t):R(a.source)}function xe(){const t={};function e(){ue(()=>{for(var s in t)t[s].unsubscribe();ce(t,L,{enumerable:!1,value:!0})})}return[t,e]}function Le(t){var e=P;try{return P=!1,[t(),P]}finally{P=e}}function ye(t,e,s,a){var B;var i=!Ee||(s&Ie)!==0,n=(s&Ae)!==0,u=(s&pe)!==0,f=a,c=!0,d=()=>(c&&(c=!1,f=u?he(a):a),f),_;if(n){var E=De in t||Ne in t;_=((B=_e(t,e))==null?void 0:B.set)??(E&&e in t?o=>t[e]=o:void 0)}var m,w=!1;n?[m,w]=Le(()=>t[e]):m=t[e],m===void 0&&a!==void 0&&(m=d(),_&&(i&&ve(),_(m)));var S;if(i?S=()=>{var o=t[e];return o===void 0?d():(c=!0,o)}:S=()=>{var o=t[e];return o!==void 0&&(f=void 0),o===void 0?f:o},i&&(s&be)===0)return S;if(_){var q=t.$$legacy;return(function(o,I){return arguments.length>0?((!i||!I||q||w)&&_(I?S():o),o):S()})}var D=!1,T=((s&Pe)!==0?Re:Oe)(()=>(D=!1,S()));n&&R(T);var J=me;return(function(o,I){if(arguments.length>0){const Y=I?R(T):i&&n?ge(o):o;return k(T,Y),D=!0,f!==void 0&&(f=Y),o}return Se&&D||(J.f&Te)!==0?T.v:R(T)})}export{Me as B,Ue as a,Ye as i,ye as p,xe as s};
